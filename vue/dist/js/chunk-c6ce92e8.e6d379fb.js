(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c6ce92e8"],{3874:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{margin:"10px 0"}},[a("el-select",{attrs:{placeholder:"请选择考试"},model:{value:e.examId,callback:function(t){e.examId=t},expression:"examId"}},e._l(e.exam,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),a("el-select",{attrs:{placeholder:"请选择学生"},model:{value:e.studentId,callback:function(t){e.studentId=t},expression:"studentId"}},e._l(e.student,(function(e){return a("el-option",{key:e.id,attrs:{label:e.username,value:e.id}})})),1),a("el-button",{staticClass:"ml-5",attrs:{type:"primary"},on:{click:e.load}},[e._v("搜索")]),a("el-button",{attrs:{type:"warning"},on:{click:e.reset}},[e._v("重置")])],1),a("div",{staticStyle:{margin:"10px 0"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增 "),a("i",{staticClass:"el-icon-circle-plus-outline"})]),a("el-popconfirm",{staticClass:"ml-5",attrs:{"confirm-button-text":"确定","cancel-button-text":"我再想想",icon:"el-icon-info","icon-color":"red",title:"您确定批量删除这些数据吗？"},on:{confirm:e.delBatch}},[a("el-button",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[e._v("批量删除 "),a("i",{staticClass:"el-icon-remove-outline"})])],1)],1),a("el-table",{attrs:{data:e.tableData,border:"",stripe:"","header-cell-class-name":"headerBg"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",sortable:""}}),a("el-table-column",{attrs:{prop:"examId",label:"考试"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.exam.find((function(e){return e.id===t.row.examId})).name))])]}}])}),a("el-table-column",{attrs:{prop:"userId",label:"学生"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.student.find((function(e){return e.id===t.row.userId})).username))])]}}])}),a("el-table-column",{attrs:{prop:"time",label:"提交时间"}}),a("el-table-column",{attrs:{prop:"score",label:"得分"}}),a("el-table-column",{attrs:{prop:"status",label:"阅卷状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.status?a("span",[a("el-tag",{attrs:{type:"danger"}},[e._v("未完成")])],1):e._e(),1===t.row.status?a("span",[a("el-tag",{attrs:{type:"success"}},[e._v("已完成")])],1):e._e()]}}])}),a("el-table-column",{attrs:{label:"查看试卷"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success"},on:{click:function(a){return e.viewPaper(t.row.id)}}},[e._v("查看"),a("i",{staticClass:"el-icon-edit"})])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success"},on:{click:function(a){return e.$router.push("/handlePaper?sp="+t.row.id)}}},[e._v("阅卷 "),a("i",{staticClass:"el-icon-edit"})]),a("el-popconfirm",{staticClass:"ml-5",attrs:{"confirm-button-text":"确定","cancel-button-text":"我再想想",icon:"el-icon-info","icon-color":"red",title:"您确定删除吗？"},on:{confirm:function(a){return e.del(t.row.id)}}},[a("el-button",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[e._v("删除 "),a("i",{staticClass:"el-icon-remove-outline"})])],1)]}}])})],1),a("div",{staticStyle:{padding:"10px 0"}},[a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[2,5,10,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"信息",visible:e.dialogFormVisible,width:"40%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{staticStyle:{width:"80%",margin:"0 auto"},attrs:{"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"考试id"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.examId,callback:function(t){e.$set(e.form,"examId",t)},expression:"form.examId"}})],1),a("el-form-item",{attrs:{label:"试卷内容"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.paper,callback:function(t){e.$set(e.form,"paper",t)},expression:"form.paper"}})],1),a("el-form-item",{attrs:{label:"学生id"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.userId,callback:function(t){e.$set(e.form,"userId",t)},expression:"form.userId"}})],1),a("el-form-item",{attrs:{label:"提交时间"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1),a("el-form-item",{attrs:{label:"得分"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.score,callback:function(t){e.$set(e.form,"score",t)},expression:"form.score"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"试卷信息",visible:e.dialogFormVisible2,width:"40%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible2=t}}},[a("div",{attrs:{id:"printArea"}},[a("div",{staticStyle:{"text-align":"center"}},[a("div",[a("h2",[e._v(e._s(e.paperExamName))]),a("br")]),e._v(" 姓名： "+e._s(e.paperUserName)+" 成绩："+e._s(e.score)+" "),a("br")]),null!=e.papers?a("div",{attrs:{id:"see"}},e._l(e.papers,(function(t,s){return a("div",{key:e.papers.id},[a("h3",[0===s?a("div",[e._v(e._s(e.questionType(t.type)))]):e._e(),s>0&&1===t.type&&e.papers[s-1].type!==t.type?a("div",[e._v("选择题")]):e._e(),s>0&&2===t.type&&e.papers[s-1].type!==t.type?a("div",[e._v("填空题")]):e._e(),s>0&&3===t.type&&e.papers[s-1].type!==t.type?a("div",[e._v("问答题")]):e._e()]),a("div",[a("div",[e._v(" "+e._s(s+1)+"."+e._s(t.name)+" ("+e._s(t.score)+"分) ")]),a("div",[1===t.type?a("div",[a("el-radio",{attrs:{label:"A"},model:{value:t["studentAnswer"],callback:function(a){e.$set(t,"studentAnswer",a)},expression:"item['studentAnswer']"}},[e._v("A."+e._s(t.a))]),a("el-radio",{attrs:{label:"B"},model:{value:t["studentAnswer"],callback:function(a){e.$set(t,"studentAnswer",a)},expression:"item['studentAnswer']"}},[e._v("B."+e._s(t.b))]),a("el-radio",{attrs:{label:"C"},model:{value:t["studentAnswer"],callback:function(a){e.$set(t,"studentAnswer",a)},expression:"item['studentAnswer']"}},[e._v("C."+e._s(t.c))]),a("el-radio",{attrs:{label:"D"},model:{value:t["studentAnswer"],callback:function(a){e.$set(t,"studentAnswer",a)},expression:"item['studentAnswer']"}},[e._v("D."+e._s(t.d))])],1):e._e(),2===t.type?a("div",[a("span",[a("el-radio",{attrs:{label:"是"},model:{value:t["studentAnswer"],callback:function(a){e.$set(t,"studentAnswer",a)},expression:"item['studentAnswer']"}},[e._v("是")])],1),a("span",[a("el-radio",{attrs:{label:"否"},model:{value:t["studentAnswer"],callback:function(a){e.$set(t,"studentAnswer",a)},expression:"item['studentAnswer']"}},[e._v("否")])],1)]):e._e(),3===t.type?a("div",[a("span",[a("el-input",{attrs:{type:"textarea"},model:{value:t["studentAnswer"],callback:function(a){e.$set(t,"studentAnswer",a)},expression:"item['studentAnswer']"}})],1)]):e._e(),a("div",[e._v("学生得分："+e._s(t.studentScore))]),a("br"),a("div",[e._v("正确答案："+e._s(t.answer))]),a("div",[e._v("解析："+e._s(t.detial))]),a("br")])])])})),0):e._e()]),a("el-button",{directives:[{name:"print",rawName:"v-print",value:e.print,expression:"print"}],staticStyle:{display:"block",margin:"0 auto"},attrs:{type:"primary"}},[e._v("打 印")])],1)],1)},n=[],l=(a("e9c4"),a("b0c0"),a("d81d"),{name:"studentPaper",data:function(){return{print:{id:"printArea",popTitle:"在线考试系统",extraHead:"",preview:!0,previewTitle:"预览的标题",previewPrintBtnLabel:"预览结束，开始打印",zIndex:25e3,previewBeforeOpenCallback:function(){console.log("正在加载预览窗口！"),console.log(this.msg,this)},previewOpenCallback:function(){console.log("已经加载完预览窗口，预览打开了！")},beforeOpenCallback:function(){console.log("开始打印之前！")},openCallback:function(){console.log("执行打印了！")},closeCallback:function(){console.log("关闭了打印工具！")},clickMounted:function(){console.log("点击v-print绑定的按钮了！")}},html:null,paperExamName:null,paperUserName:null,tableData:[],exam:[],student:[],papers:[],score:null,total:0,pageNum:1,pageSize:10,examId:"",studentId:"",form:{},dialogFormVisible:!1,dialogFormVisible2:!1,multipleSelection:[],user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{}}},created:function(){var e=this;this.load(),this.request.get("/exam").then((function(t){e.exam=t.data})),this.request.get("/user").then((function(t){e.student=t.data}))},methods:{questionType:function(e){return 1===e?"选择题":2===e?"判断题":3===e?"问答题":void 0},load:function(){var e=this;this.request.get("/studentPaper/page",{params:{pageNum:this.pageNum,pageSize:this.pageSize,examId:this.examId,studentId:this.studentId}}).then((function(t){e.tableData=t.data.records,e.total=t.data.total}))},save:function(){var e=this;this.request.post("/studentPaper",this.form).then((function(t){"200"===t.code?(e.$message.success("保存成功"),e.dialogFormVisible=!1,e.load()):e.$message.error("保存失败")}))},handleAdd:function(){var e=this;this.dialogFormVisible=!0,this.form={},this.$nextTick((function(){e.$refs.img&&e.$refs.img.clearFiles(),e.$refs.file&&e.$refs.file.clearFiles()}))},handleEdit:function(e){var t=this;this.form=JSON.parse(JSON.stringify(e)),this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs.img&&t.$refs.img.clearFiles(),t.$refs.file&&t.$refs.file.clearFiles()}))},del:function(e){var t=this;this.request.delete("/studentPaper/"+e).then((function(e){"200"===e.code?(t.$message.success("删除成功"),t.load()):t.$message.error("删除失败")}))},viewPaper:function(e){var t=this;this.request.get("/studentPaper/"+e).then((function(e){"200"===e.code?(t.$message.success("查看试卷成功"),t.dialogFormVisible2=!0,t.papers=JSON.parse(e.data.paper),t.score=e.data.score,t.request.get("/exam/"+e.data.examId).then((function(e){t.paperExamName=e.data.name})),t.request.get("/user/"+e.data.userId).then((function(e){t.paperUserName=e.data.username}))):t.$message.error("查看试卷失败")}))},handleSelectionChange:function(e){console.log(e),this.multipleSelection=e},delBatch:function(){var e=this;if(this.multipleSelection.length){var t=this.multipleSelection.map((function(e){return e.id}));this.request.post("/studentPaper/del/batch",t).then((function(t){"200"===t.code?(e.$message.success("批量删除成功"),e.load()):e.$message.error("批量删除失败")}))}else this.$message.error("请选择需要删除的数据")},reset:function(){this.name="",this.load()},handleSizeChange:function(e){console.log(e),this.pageSize=e,this.load()},handleCurrentChange:function(e){console.log(e),this.pageNum=e,this.load()},handleFileUploadSuccess:function(e){this.form.file=e},handleImgUploadSuccess:function(e){this.form.img=e},download:function(e){window.open(e)},exp:function(){window.open("http://localhost:9090/studentPaper/export")},handleExcelImportSuccess:function(){this.$message.success("导入成功"),this.load()}}}),r=l,i=a("2877"),o=Object(i["a"])(r,s,n,!1,null,null,null);t["default"]=o.exports},e9c4:function(e,t,a){var s=a("23e7"),n=a("da84"),l=a("d066"),r=a("2ba4"),i=a("e330"),o=a("d039"),c=n.Array,u=l("JSON","stringify"),d=i(/./.exec),p=i("".charAt),m=i("".charCodeAt),f=i("".replace),v=i(1..toString),h=/[\uD800-\uDFFF]/g,b=/^[\uD800-\uDBFF]$/,g=/^[\uDC00-\uDFFF]$/,_=function(e,t,a){var s=p(a,t-1),n=p(a,t+1);return d(b,e)&&!d(g,n)||d(g,e)&&!d(b,s)?"\\u"+v(m(e,0),16):e},y=o((function(){return'"\\udf06\\ud834"'!==u("\udf06\ud834")||'"\\udead"'!==u("\udead")}));u&&s({target:"JSON",stat:!0,forced:y},{stringify:function(e,t,a){for(var s=0,n=arguments.length,l=c(n);s<n;s++)l[s]=arguments[s];var i=r(u,null,l);return"string"==typeof i?f(i,h,_):i}})}}]);
//# sourceMappingURL=chunk-c6ce92e8.e6d379fb.js.map