(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e4ea9aca"],{cd2d:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-card",[a("el-button",{on:{click:function(t){return e.searchQuestion()}}},[e._v("搜索题目")]),a("el-button",{on:{click:function(t){return e.backPaper()}}},[e._v("返回")]),a("ul",e._l(e.questionList,(function(t,n){return a("li",{key:t.id},[a("span",[e._v(e._s(t.name)+" "+e._s(e.questionType(t.type))+" "),a("el-button",{on:{click:function(a){return e.delQuestion(t.id)}}},[e._v("删除")])],1)])})),0)],1)],1),a("div",[a("el-dialog",{attrs:{title:"添加题目",visible:e.dialogAddQuestion,width:"60%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogAddQuestion=t},close:e.closeAddQuestion}},[a("div",[a("div",{staticStyle:{margin:"10px 0"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入题干","suffix-icon":"el-icon-search"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("el-select",{attrs:{placeholder:"请选择课程"},model:{value:e.courseId,callback:function(t){e.courseId=t},expression:"courseId"}},e._l(e.courses,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),a("el-select",{attrs:{placeholder:"请选择题型"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l([{name:"选择题",value:1},{name:"判断题",value:2},{name:"问答题",value:3}],(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1),a("el-button",{staticClass:"ml-5",attrs:{type:"primary"},on:{click:e.load}},[e._v("搜索")]),a("el-button",{attrs:{type:"warning"},on:{click:e.reset}},[e._v("重置")])],1),a("el-button",{on:{click:e.addQuestion}},[e._v("添加")]),a("el-table",{ref:"multipleTable",attrs:{data:e.tableData,border:"",stripe:"","header-cell-class-name":"headerBg"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",sortable:""}}),a("el-table-column",{attrs:{prop:"name",label:"题干"}}),a("el-table-column",{attrs:{label:"所属课程"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.courses.find((function(e){return e.id===t.row.courseId})).name))])]}}])}),a("el-table-column",{attrs:{prop:"type",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.type?a("span",[e._v("选择题")]):e._e(),2===t.row.type?a("span",[e._v("判断题")]):e._e(),3===t.row.type?a("span",[e._v("问答题")]):e._e()]}}])})],1),a("div",{staticStyle:{padding:"10px 0"}},[a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[2,5,10,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])],1)])},o=[],s=(a("b0c0"),a("d81d"),a("d3b7"),a("159b"),a("e9c4"),{data:function(){return{addpaperId:this.$route.query.paperId,addcourseId:this.$route.query.courseId,questionList:[],tableData:[],total:0,pageNum:1,pageSize:10,multipleSelection:[],name:"",type:"",dialogAddQuestion:!1,courseId:"",paperId:"",user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{},courses:[]}},created:function(){var e=this;this.getPaperQuestion(),this.load(),this.request.get("/course").then((function(t){e.courses=t.data})),this.getPaperId()},methods:{getPaperQuestion:function(){var e=this,t=this.addpaperId;console.log("paperId:"+t),this.request.get("/paperQuestion/get-question/"+t).then((function(t){"200"===t.code?e.questionList=t.data:e.$message.error("获取题目失败")}))},questionType:function(e){return 1===e?"选择题":2===e?"判断题":3===e?"问答题":void 0},searchQuestion:function(){console.log("courseId:"+this.addcourseId),this.dialogAddQuestion=!0},delQuestion:function(e){var t=this;console.log("del..."),console.log("questionId"+e);var a=this.addpaperId;console.log("paperId"+a),this.request.delete("paperQuestion/"+a+"/"+e).then((function(e){"200"===e.code?(t.$message.success("删除成功"),t.getPaperQuestion()):t.$message.error("删除失败")}))},getPaperId:function(){""!==this.$store.state.paperId&&(console.log(this.$store.state.paperId),this.paperId=this.$store.state.paperId),console.log("list:"+this.paperId)},handleSizeChange:function(e){console.log(e),this.pageSize=e,this.load()},handleCurrentChange:function(e){console.log(e),this.pageNum=e,this.load()},load:function(){var e=this;this.request.get("/question/page",{params:{pageNum:this.pageNum,pageSize:this.pageSize,name:this.name,type:this.type,courseId:this.addcourseId}}).then((function(t){e.tableData=t.data.records,e.total=t.data.total}))},reset:function(){this.name="",this.type="",this.addcourseId="",this.load()},handleSelectionChange:function(e){console.log(e),this.multipleSelection=e},addQuestion:function(){var e=this;if(this.multipleSelection.length){var t=[],a=this.multipleSelection.map((function(e){return e.id}));a.forEach((function(a){t.push({paperId:e.addpaperId,questionId:a})}));var n=JSON.stringify(t);console.log(n),this.request.post("/paperQuestion/all",n).then((function(t){"200"===t.code?(e.$message.success("添加成功"),e.getPaperQuestion(),e.dialogAddQuestion=!1):e.$message.error(t.msg)}))}else this.$message.error("请选择需要添加的数据")},closeAddQuestion:function(){this.$refs.multipleTable.clearSelection(),console.log("close"),this.multipleSelection=[],console.log("数组="+this.multipleSelection)},backPaper:function(){this.$router.push("/paper")}}}),i=s,l=a("2877"),r=Object(l["a"])(i,n,o,!1,null,"645079ac",null);t["default"]=r.exports},e9c4:function(e,t,a){var n=a("23e7"),o=a("da84"),s=a("d066"),i=a("2ba4"),l=a("e330"),r=a("d039"),u=o.Array,c=s("JSON","stringify"),d=l(/./.exec),p=l("".charAt),h=l("".charCodeAt),g=l("".replace),f=l(1..toString),m=/[\uD800-\uDFFF]/g,v=/^[\uD800-\uDBFF]$/,b=/^[\uDC00-\uDFFF]$/,y=function(e,t,a){var n=p(a,t-1),o=p(a,t+1);return d(v,e)&&!d(b,o)||d(b,e)&&!d(v,n)?"\\u"+f(h(e,0),16):e},I=r((function(){return'"\\udf06\\ud834"'!==c("\udf06\ud834")||'"\\udead"'!==c("\udead")}));c&&n({target:"JSON",stat:!0,forced:I},{stringify:function(e,t,a){for(var n=0,o=arguments.length,s=u(o);n<o;n++)s[n]=arguments[n];var l=i(c,null,s);return"string"==typeof l?g(l,m,y):l}})}}]);
//# sourceMappingURL=chunk-e4ea9aca.d070485c.js.map