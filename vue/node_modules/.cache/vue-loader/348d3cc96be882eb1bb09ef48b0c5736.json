{"remainingRequest":"D:\\daima\\java\\springboot\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\daima\\java\\springboot\\vue\\src\\views\\HandlePaper.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\daima\\java\\springboot\\vue\\src\\views\\HandlePaper.vue","mtime":1679754363294},{"path":"D:\\daima\\java\\springboot\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670775870315},{"path":"D:\\daima\\java\\springboot\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1670775870320},{"path":"D:\\daima\\java\\springboot\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670775870315},{"path":"D:\\daima\\java\\springboot\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1670775868363}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgSXQgZnJvbSAiZWxlbWVudC11aS9zcmMvbG9jYWxlL2xhbmcvaXQiOw0KaW1wb3J0IHJlcXVlc3QgZnJvbSAiQC91dGlscy9yZXF1ZXN0IjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiSGFuZGxlUGFwZXIiLA0KICBkYXRhKCl7DQogICAgcmV0dXJuew0KICAgICAgc3A6dGhpcy4kcm91dGUucXVlcnkuc3AsDQogICAgICBwYXBlcnM6W10sDQogICAgICBzdHVkZW50SWQ6JycsDQoNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5yZXF1ZXN0LmdldCgiL3N0dWRlbnRQYXBlci8iK3RoaXMuc3ApLnRoZW4ocmVzPT57DQogICAgICBpZiAocmVzLmNvZGU9PT0nMjAwJyl7DQogICAgICAgIHRoaXMucGFwZXJzPUpTT04ucGFyc2UocmVzLmRhdGEucGFwZXIpDQogICAgICAgIGlmICh0aGlzLnBhcGVycyYmdGhpcy5wYXBlcnMubGVuZ3RoKXsNCiAgICAgICAgICB0aGlzLnBhcGVycy5mb3JFYWNoKGl0ZW09PnsNCiAgICAgICAgICAgIGlmIChpdGVtLnR5cGU9PT0xfHxpdGVtLnR5cGU9PT0yKXsNCiAgICAgICAgICAgICAgaWYgKGl0ZW0uYW5zd2VyID09PSBpdGVtLnN0dWRlbnRBbnN3ZXIpew0KICAgICAgICAgICAgICAgIGl0ZW0uc3R1ZGVudFNjb3JlPWl0ZW0uc2NvcmUNCiAgICAgICAgICAgICAgfWVsc2Ugew0KICAgICAgICAgICAgICAgIGl0ZW0uc3R1ZGVudFNjb3JlPTANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSkNCiAgICAvL+iOt+WPluWtpueUn2lkDQogICAgcmVxdWVzdC5nZXQoIi9zdHVkZW50UGFwZXIvIit0aGlzLnNwKS50aGVuKHJlcz0+IHsNCiAgICAgICAgaWYgKHJlcy5jb2RlID09PScyMDAnKXsNCiAgICAgICAgICB0aGlzLnN0dWRlbnRJZCA9cmVzLmRhdGEudXNlcklkDQogICAgICAgIH0NCiAgICB9KQ0KICB9LA0KICBtZXRob2RzOnsNCiAgICBzdWJtaXRTY29yZSgpew0KICAgICAgbGV0IHN1bT0wDQogICAgICBjb25zdCBwYXJhbSA9IFtdDQogICAgICB0aGlzLnBhcGVycy5mb3JFYWNoKGl0ZW09PnsNCiAgICAgICAgaWYgKGl0ZW0uc3R1ZGVudFNjb3JlPT1udWxsKXsNCiAgICAgICAgICBpdGVtLnN0dWRlbnRTY29yZT0wDQogICAgICAgIH0NCiAgICAgICAgIHN1bSs9cGFyc2VJbnQoaXRlbS5zdHVkZW50U2NvcmUpDQogICAgICAgIGlmIChpdGVtLnN0dWRlbnRTY29yZSAhPSBpdGVtLnNjb3JlKXsNCiAgICAgICAgICBwYXJhbS5wdXNoKHsicXVlc3Rpb25JZCI6aXRlbS5pZCwgInN0dWRlbnRJZCI6dGhpcy5zdHVkZW50SWQsInN0dWRlbnRQYXBlcklkIjp0aGlzLnNwLA0KICAgICAgICAgICAgInN0dWRlbnRBbnN3ZXIiOml0ZW0uc3R1ZGVudEFuc3dlciwgInN0dWRlbnRTY29yZSI6IGl0ZW0uc3R1ZGVudFNjb3JlfSkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIHJlcXVlc3QucG9zdCgiL3dyb25nL2FsbCIsSlNPTi5zdHJpbmdpZnkocGFyYW0pKS50aGVuKHJlcyA9PnsNCiAgICAgICAgaWYgKHJlcy5jb2RlID09PScyMDAnKXsNCiAgICAgICAgICBjb25zb2xlLmxvZygi55Sf5oiQ6ZSZ6aKY5oiQ5YqfIikNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIHRoaXMucmVxdWVzdC5wdXQoIi9zdHVkZW50UGFwZXIiLHtpZDp0aGlzLnNwLHNjb3JlOnN1bSxwYXBlcjpKU09OLnN0cmluZ2lmeSh0aGlzLnBhcGVycyksc3RhdHVzOjF9KS50aGVuKHJlcz0+ew0KICAgICAgICBpZiAocmVzLmNvZGU9PT0nMjAwJyl7DQogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9zdHVkZW5wYXBlciIpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["HandlePaper.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HandlePaper.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n<div>\r\n  <el-table :data=\"papers\" border stripe :header-cell-class-name=\"'headerBg'\">\r\n    <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n    <el-table-column prop=\"id\" label=\"ID\" width=\"80\" sortable></el-table-column>\r\n    <el-table-column prop=\"name\" label=\"题目\"></el-table-column>\r\n    <el-table-column prop=\"type\" label=\"类型\">\r\n      <template v-slot=\"scope\">\r\n        <span v-if=\"scope.row.type===1\" >选择题</span>\r\n        <span v-if=\"scope.row.type===2\">判断题</span>\r\n        <span v-if=\"scope.row.type===3\">问答题</span>\r\n        <span v-if=\"scope.row.type===4\">多选题</span>\r\n        <span v-if=\"scope.row.type===5\">填空题</span>\r\n      </template>\r\n    </el-table-column>\r\n    <el-table-column prop=\"score\" label=\"分数\"></el-table-column>\r\n    <el-table-column prop=\"answer\" label=\"标准答案\"></el-table-column>\r\n    <el-table-column prop=\"studentAnswer\" label=\"学生答案\"></el-table-column>\r\n    <el-table-column prop=\"studentScore\" label=\"得分\">\r\n      <template v-slot=\"scope\">\r\n        <el-input type=\"text\" v-model=\"scope.row.studentScore\"></el-input>\r\n      </template>\r\n    </el-table-column>\r\n  </el-table>\r\n\r\n  <el-button @click=\"submitScore\">提交</el-button>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport It from \"element-ui/src/locale/lang/it\";\r\nimport request from \"@/utils/request\";\r\n\r\nexport default {\r\n  name: \"HandlePaper\",\r\n  data(){\r\n    return{\r\n      sp:this.$route.query.sp,\r\n      papers:[],\r\n      studentId:'',\r\n\r\n    }\r\n  },\r\n  created() {\r\n    this.request.get(\"/studentPaper/\"+this.sp).then(res=>{\r\n      if (res.code==='200'){\r\n        this.papers=JSON.parse(res.data.paper)\r\n        if (this.papers&&this.papers.length){\r\n          this.papers.forEach(item=>{\r\n            if (item.type===1||item.type===2){\r\n              if (item.answer === item.studentAnswer){\r\n                item.studentScore=item.score\r\n              }else {\r\n                item.studentScore=0\r\n            }\r\n            }\r\n          })\r\n        }\r\n      }\r\n    })\r\n    //获取学生id\r\n    request.get(\"/studentPaper/\"+this.sp).then(res=> {\r\n        if (res.code ==='200'){\r\n          this.studentId =res.data.userId\r\n        }\r\n    })\r\n  },\r\n  methods:{\r\n    submitScore(){\r\n      let sum=0\r\n      const param = []\r\n      this.papers.forEach(item=>{\r\n        if (item.studentScore==null){\r\n          item.studentScore=0\r\n        }\r\n         sum+=parseInt(item.studentScore)\r\n        if (item.studentScore != item.score){\r\n          param.push({\"questionId\":item.id, \"studentId\":this.studentId,\"studentPaperId\":this.sp,\r\n            \"studentAnswer\":item.studentAnswer, \"studentScore\": item.studentScore})\r\n        }\r\n      })\r\n      request.post(\"/wrong/all\",JSON.stringify(param)).then(res =>{\r\n        if (res.code ==='200'){\r\n          console.log(\"生成错题成功\")\r\n        }\r\n      })\r\n      this.request.put(\"/studentPaper\",{id:this.sp,score:sum,paper:JSON.stringify(this.papers),status:1}).then(res=>{\r\n        if (res.code==='200'){\r\n          this.$router.push(\"/studenpaper\")\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}